<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Sideby Pass</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="shell flex flex-col gap-8">
      <header class="header flex items-center justify-between">
        <div class="flex items-center gap-4">
          <img src="icon-32.png" alt="Logo" width="32" height="32" />
          <div class="flex flex-col gap-1">
            <h1>Sideby Pass</h1>
            <p>Ready to watch? Just pass it.</p>
          </div>
        </div>
      </header>

      <main id="main-content">
        <!-- State: Loading -->
        <div id="state-loading" class="status_container">
          <div class="spinner"></div>
          <span class="status-text">Hunting for video signals...</span>
        </div>

        <!-- State: Error/No Video -->
        <div id="state-error" class="status_container" hidden>
          <div class="error-icon">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="16"
              height="16"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <circle cx="12" cy="12" r="10" />
              <line x1="12" x2="12" y1="8" y2="12" />
              <line x1="12" x2="12.01" y1="16" y2="16" />
            </svg>
          </div>
          <span class="status-text" id="error-message">It's quiet... too quiet. No video found here.</span>
        </div>

        <!-- State: Success (Video Detected) -->
        <div id="state-success" class="flex flex-col gap-6" hidden>
          <div class="card featured">
            <div class="card-header flex items-center justify-between">
              <div class="pill" id="video-count-pill">Bingo! Video found</div>
              <div class="pill pill-ghost" id="video-kind">Stream</div>
            </div>
            <div class="card-content flex flex-col gap-2">
              <div class="flex flex-col gap-1">
                <div class="flex items-center gap-2">
                  <span id="video-quality" class="pill pill-ghost" hidden>1080p</span>
                  <div id="video-title" class="truncate text-base font-semibold">Untitled Video</div>
                </div>
                <div class="text-xs text-muted-foreground">From <span id="page-host">this page</span></div>
              </div>
              <div id="video-url" class="mono truncate text-xs"></div>
            </div>
          </div>

          <div class="video-list" id="video-list"></div>

          <div class="flex flex-col gap-2">
            <button id="create-room" class="btn btn-primary">Create Room</button>
            <button id="copy-link" class="btn btn-outline">Grab Link</button>
          </div>
        </div>
      </main>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
